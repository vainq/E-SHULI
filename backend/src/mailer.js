const nodemailer=require('nodemailer');const{CONFIG}=require('./config');async function sendOTP(to,code){if(CONFIG.DEV_MODE){console.log(`[DEV_MODE] OTP for ${to}: ${code}`);return;}const transporter=nodemailer.createTransport({host:CONFIG.SMTP_HOST,port:CONFIG.SMTP_PORT,secure:CONFIG.SMTP_PORT===465,auth:{user:CONFIG.SMTP_USER,pass:CONFIG.SMTP_PASS}});await transporter.sendMail({from:`"E-SHULI" <${CONFIG.SMTP_USER}>`,to,subject:'Your E-SHULI Admin OTP',text:`Your OTP is: ${code}. It expires in 10 minutes.`});}exports.sendOTP=sendOTP;
