import { useState } from 'react';import { apiPost } from '../lib/api';import { setToken } from '../lib/auth';import { useNavigate } from 'react-router-dom';export default function AdminLogin(){const[step,setStep]=useState('cred');const[username,setUsername]=useState('UNESHA');const[password,setPassword]=useState('');const[otp,setOtp]=useState('');const[msg,setMsg]=useState('');const nav=useNavigate();async function submitCred(){setMsg('');try{await apiPost('/api/admin/login',{username,password});setStep('otp');}catch{setMsg('Invalid credentials');}}async function submitOtp(){setMsg('');try{const data=await apiPost('/api/admin/verify',{username,otp});setToken(data.token);nav('/admin/uploads');}catch{setMsg('Invalid or expired OTP');}}return(<div className='max-w-sm mx-auto border rounded-xl p-6 bg-white'><h1 className='text-xl font-bold mb-3'>Admin Login</h1>{step==='cred'?(<><input className='w-full border rounded px-3 py-2 mb-2' placeholder='Username' value={username} onChange={e=>setUsername(e.target.value)}/><input type='password' className='w-full border rounded px-3 py-2 mb-2' placeholder='Password' value={password} onChange={e=>setPassword(e.target.value)}/><button onClick={submitCred} className='w-full px-4 py-2 rounded bg-black text-white'>Continue</button></>):(<><p className='text-sm mb-2'>Enter the 6-digit code sent to admin email.</p><input className='w-full border rounded px-3 py-2 mb-2' placeholder='OTP' value={otp} onChange={e=>setOtp(e.target.value)}/><button onClick={submitOtp} className='w-full px-4 py-2 rounded bg-black text-white'>Verify</button></>)}{msg&&<p className='text-red-600 text-sm mt-2'>{msg}</p>}</div>);}
